/* src/styles/design-tokens.css — Ultra Premium V3 MAX */
/* ────────────────────────────────────────────────── */

:root {
  color-scheme: light dark;

  /* Brand & accent (HSL – utilisé par Tailwind: hsl(var(--accent))) */
  --brand: 222 47% 11%;
  --accent: 221 83% 53%;
  --accent-600: 223 77% 47%;
  --accent-700: 224 71% 40%;

  /* Semantic */
  --success: 142 72% 29%;
  --warning: 38 92% 50%;
  --danger:   0 72% 51%;

  /* Surfaces — Light */
  --bg:        210 40% 98%;
  --surface:     0  0% 100%;
  --surface-2: 210 40% 96%;
  --border:    214 32% 91%;
  --text:      222 47% 11%;
  --text-muted:215 20% 35%;

  /* Radii */
  --radius-sm:  .375rem;
  --radius:      .75rem;
  --radius-lg:    1rem;
  --radius-2xl: 1.25rem;
  --radius-3xl: 1.75rem;

  /* Shadows (light) */
  --shadow-sm: 0 1px  2px  rgba(0,0,0,.05);
  --shadow-md: 0 4px 14px  rgba(0,0,0,.08);
  --shadow-lg: 0 10px 30px rgba(0,0,0,.10);

  /* Focus ring */
  --ring-color: hsl(var(--accent));
  --ring-offset: 2px;

  /* Motion */
  --ease-out: cubic-bezier(.19,1,.22,1);
  --ease-in:  cubic-bezier(.95,.05,.795,.035);
  --dur-fast: .18s;
  --dur:      .28s;
  --dur-slow: .45s;

  /* Typography (next/font injecte les variables) */
  --font-inter: Inter, ui-sans-serif, system-ui;
  --font-sora:  Sora,  ui-sans-serif, system-ui;
  --font-sans: var(--font-inter), Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --font-heading: var(--font-sora), var(--font-inter), Inter, ui-sans-serif, system-ui;

  /* Typo fluide (échelle – adapte si besoin) */
  --step--1: clamp(.86rem, .83rem + .15vw, .95rem);
  --step-0:  clamp(1.00rem, .98rem + .22vw, 1.10rem);
  --step-1:  clamp(1.15rem, 1.10rem + .35vw, 1.38rem);
  --step-2:  clamp(1.35rem, 1.25rem + .55vw, 1.72rem);
  --step-3:  clamp(1.62rem, 1.45rem + .85vw, 2.15rem);
  --step-4:  clamp(1.94rem, 1.70rem + 1.25vw, 2.69rem);
  --step-5:  clamp(2.33rem, 2.00rem + 1.85vw, 3.36rem);

  /* Layout */
  --container-max: 1280px;

  /* Selection */
  --selection-bg: hsl(var(--accent) / .18);
  --selection-fg: hsl(var(--text));

  /* Gradients / overlays */
  --ring-conic: conic-gradient(from 140deg, hsl(var(--accent) / .45), transparent 40%, hsl(199 89% 48% / .35), transparent 70%);
  --overlay-hero: radial-gradient(80% 60% at 50% 40%, transparent, rgba(0,0,0,.55));

  /* Elevation (couleur + opacités) */
  --elev-c: 0 0% 0%;
  --elev-a1: .06; --elev-a2: .08; --elev-a3: .10;

  /* Variantes opt-in P3 / OKLCH (n’impactent pas Tailwind) */
  --accent-p3: 0.25 0.54 1;             /* color(display-p3 r g b) sans le wrapper */
  --accent-oklch: 0.70 0.15 258;        /* oklch(L C H) */
}

.dark {
  /* Surfaces — Dark */
  --bg:        222 47% 5%;
  --surface:   222 47% 7%;
  --surface-2: 222 47% 10%;
  --border:    222 16% 18%;
  --text:      210 40% 96%;
  --text-muted:215 16% 65%;

  /* Accent un peu plus lumineux en dark */
  --accent:     221 83% 64%;
  --accent-600: 221 83% 58%;
  --accent-700: 221 83% 52%;

  /* Shadows (dark) */
  --shadow-sm: 0 1px 2px  rgba(0,0,0,.35);
  --shadow-md: 0 8px 20px rgba(0,0,0,.40);
  --shadow-lg: 0 20px 45px rgba(0,0,0,.45);

  --selection-bg: hsl(var(--accent) / .25);
  --elev-a1: .30; --elev-a2: .38; --elev-a3: .45;
}

/* Opt-in : saturations plus riches sur écrans P3 (sans casser Tailwind) */
@supports (color: color(display-p3 1 1 1)) {
  .use-p3 {
    --accent-paint: color(display-p3 var(--accent-p3));
  }
}

/* Opt-in : OKLCH pour dégradés ultra réguliers */
@supports (color: oklch(50% 0 0)) {
  .use-oklch {
    --accent-paint: oklch(var(--accent-oklch));
  }
}

/* ── Base / reset premium ─────────────────────────── */

*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }
html { scroll-behavior: smooth; text-size-adjust: 100%; }
body {
  margin: 0;
  background-color: hsl(var(--bg));
  color: hsl(var(--text));
  font-family: var(--font-sans);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

h1, h2, h3, h4 {
  font-family: var(--font-heading);
  letter-spacing: -0.01em;
}
h1 { font-size: var(--step-5); line-height: 1.05; text-wrap: balance; }
h2 { font-size: var(--step-4); line-height: 1.1;  text-wrap: balance; }
h3 { font-size: var(--step-3); line-height: 1.15; }

/* Links */
a {
  color: hsl(var(--accent));
  text-decoration: none;
  transition:
    color var(--dur-fast) ease,
    opacity var(--dur-fast) ease,
    text-decoration-color var(--dur-fast) ease;
}
a:hover,
a:focus-visible {
  color: hsl(var(--accent-600));
  text-decoration: underline;
  text-decoration-thickness: 2px;
  text-underline-offset: 2px;
}

/* Buttons reset */
button {
  border: 0;
  background: transparent;
  border-radius: var(--radius);
  font: inherit;
  color: inherit;
}

/* Selection */
::selection {
  background: var(--selection-bg);
  color: var(--selection-fg);
}

/* Focus ring (fallback universel ; Tailwind fournit .focus-ring) */
:where(a, button, input, select, textarea, summary):focus-visible {
  outline: none;
  box-shadow:
    0 0 0 var(--ring-offset) hsl(var(--surface)),
    0 0 0 calc(var(--ring-offset) + 2px) var(--ring-color);
  border-radius: max(var(--radius-sm), .375rem);
}

/* Helpers accessibilité */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0;
}

/* Containers */
.container-soft {
  width: min(100% - 2rem, var(--container-max));
  margin-inline: auto;
}

/* Cards */
.soft-card {
  background: hsl(var(--surface));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-sm);
  transition: box-shadow var(--dur) var(--ease-out), transform var(--dur) var(--ease-out);
}
.soft-card:hover { box-shadow: var(--shadow-md); }

/* Elevation helpers */
.elevation-1 { box-shadow: 0 8px 18px hsl(var(--elev-c) / var(--elev-a1)); }
.elevation-2 { box-shadow: 0 14px 28px hsl(var(--elev-c) / var(--elev-a2)); }
.elevation-3 { box-shadow: 0 22px 48px hsl(var(--elev-c) / var(--elev-a3)); }

/* Motion fallback (si JS off) */
.motion-section {
  opacity: 0;
  transform: translateY(8px);
  animation: fadeInUp var(--dur-slow) var(--ease-out) forwards;
  will-change: transform, opacity;
}

/* Hero overlay utilitaire */
.overlay-hero { background: var(--overlay-hero); }

/* Scrollbars (et plugin Tailwind pour variantes supplémentaires) */
* {
  scrollbar-color: hsl(var(--border)) transparent;
  scrollbar-width: thin;
}
*::-webkit-scrollbar { height: 8px; width: 8px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb { background: hsl(var(--border)); border-radius: 999px; }
*::-webkit-scrollbar-thumb:hover { background: hsl(var(--text-muted) / .45); }

/* Text helpers modernes */
.text-balance { text-wrap: balance; }
.text-pretty  { text-wrap: pretty; }

/* Opt-in peinture d’accent avancée (P3/OKLCH) */
.use-p3 .accent-paint,
.use-oklch .accent-paint {
  background: var(--accent-paint);
  color: white;
}

/* High-contrast users */
@media (prefers-contrast: more) {
  :root { --ring-offset: 3px; }
  .soft-card { border-width: 2px; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Keyframes locales */
@keyframes fadeInUp {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}
